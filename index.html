<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://bootswatch.com/4/cosmo/bootstrap.min.css">
    <link rel="stylesheet" href="./style.css">
    <title>ASCII Art Generator</title>
</head>
<body>
    <nav class="navbar navbar-dark bg-primary mb-5">
        <div class="container">
            <a href="#" class="navbar-brand">ASCII Art Generator</a>
        </div>
    </nav>
    <div class="container">
        <div class="row">
            <div class="col-md-10 m-auto">


              <video id="player" controls autoplay></video>
              <button id="capture">Capture</button>
              <canvas id="canvas" width=640 height=480></canvas>
              <script>
                const player = document.getElementById('player');
                const snapshotCanvas = document.getElementById('canvas');
                const captureButton = document.getElementById('capture');
                let videoTracks;

                const handleSuccess = (stream) => {
                  // Attach the video stream to the video element and autoplay.
                  player.srcObject = stream;
                  videoTracks = stream.getVideoTracks();
                };

                captureButton.addEventListener('click', () => {
                  const context = canvas.getContext('2d');
                  // Draw the video frame to the canvas.
                  context.drawImage(player, 0, 0, snapshotCanvas.width,
                      snapshotCanvas.height);
                      console.log('Successfully loaded image!');
                      console.log('Image size: ' + snapshotCanvas.width + ' x ' + snapshotCanvas.height);

                  videoTracks.forEach((track) => {
                      track.stop()
                  });
                });

                navigator.mediaDevices.getUserMedia({video: true})
                    .then(handleSuccess);
              </script>
              <canvas id="terminal" width=640 height=480></canvas>


                <h4 class="text-center my-3">Effects</h4>

                <div class="row justify-content-md-center row mb-3">
                    <div class="col-md-6">
                        <button class="filter-btn ascii-art btn btn-success btn-block">Ascii Art</button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <button id="download-btn" class="btn btn-dark btn-block">Download Image</button>
                    </div>
                    <div class="col-md-6">
                        <button id="revert-btn" class="btn btn-danger btn-block">Remove Filters</button>
                    </div>
                </div>

                <footer id="footer">
                    <br><br>
                    <p>Made by <a href="http://www.jakegrogan.com">Julia Feitosa</a></p>
                </footer>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/camanjs/4.1.2/caman.full.min.js"></script>
    <script src="./main.js"></script>

</body>
</html>
