!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r=n(1);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a=document.getElementById("canvas"),i=a.getContext("2d"),u=(i.getImageData(0,0,a.width,a.height).data,document.getElementById("ascii")),d=document.getElementById("player"),c=document.getElementById("start_stream"),l=document.getElementById("capture"),f=document.getElementById("upload"),h=" `-^:LiCtfG08@%",g=Math.floor(.55*a.width),m=Math.floor(.55*a.height),s=a.width,v=a.height,y=!1,p=new Image,w=function(t,e){var n=Math.floor(function(){var t=document.createElement("pre");t.style.display="inline",t.textContent=h[0],document.body.appendChild(t);var e=t.getBoundingClientRect(),n=e.width,r=e.height;return document.body.removeChild(t),r/n}()*t);if(e>m)return[Math.floor(n*m/e),m];if(t>g){var r=Math.floor(e*g/n);return[g,r]}return[n,e]};c.addEventListener("click",function(){(0,r.openWebcam)().then(function(t){(0,r.startStream)(t,y,d),y=!y,c.innerHTML=y?"Stop Stream":"Start Stream"})}),l.addEventListener("click",function(){I(),x(),E()}),f.addEventListener("change",function(t){b()});var b=function(){var t=document.getElementById("upload").files[0],e=new FileReader,n=a.getContext("2d");t&&(t.name,e.readAsDataURL(t)),e.addEventListener("load",function(){(p=new Image).src=e.result,p.onload=function(){a.width=p.width,a.height=p.height,n.drawImage(p,0,0,p.width,p.height);var t=a.getContext("2d"),e=o(w(s,v),2),r=e[0],i=e[1];a.width=r,a.height=i,t.drawImage(p,0,0,a.width,a.height),x(),E()}},!1)},I=function(){var t=a.getContext("2d"),e=o(w(s,v),2),n=e[0],r=e[1];a.width=n,a.height=r,console.log("Successfully loaded image!"),console.log("Image size: "+a.width+" x "+a.height),t.drawImage(d,0,0,a.width,a.height),a.style.display="none"},x=function(){var t=a.getContext("2d"),e=t.getImageData(0,0,a.width,a.height),n=e.data;console.log(e);for(var r=0;r<n.length;r+=4){var o=function(t,e,n){return(Math.max(t,e,n)+Math.min(t,e,n))/2}(n[r],n[r+1],n[r+2]);n[r]=n[r+1]=n[r+2]=o}t.putImageData(e,0,0)},E=function(){for(var t,e=i.getImageData(0,0,a.width,a.height).data,n="",r=0;r<e.length;r+=4)r/4%a.width==0&&(n+="\n"),n+=(t=e[r],function(t,e){for(;e-1>0;)t+=t,e--;return t}(h[Math.floor((h.length-1)*t/255)],1));u.style.fontSize="3px",u.textContent=n}},function(t,e,n){"use strict";n.r(e),n.d(e,"openWebcam",function(){return r}),n.d(e,"startStream",function(){return o});var r=function(){return navigator.mediaDevices.getUserMedia({video:!0})},o=function(t,e,n){var r;return e?r.forEach(function(t){t.stop()}):(n.srcObject=t,r=t.getVideoTracks()),r}}]);
//# sourceMappingURL=bundle.js.map