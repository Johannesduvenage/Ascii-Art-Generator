!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r=n(1);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=document.getElementById("myCanvas"),a=i.getContext("2d"),u=(a.getImageData(0,0,i.width,i.height).data,document.getElementById("ascii")),c=document.getElementById("player"),d=document.getElementById("start_stream"),l=" `-^Â¬:L*iCtfG0X8@#&%",f=Math.floor(.175*i.width),h=Math.floor(.175*i.height),s=i.width,g=i.height,m=!1,y=function(t,e){var n=Math.floor(function(){var t=document.createElement("pre");t.style.display="inline",t.textContent=l[0],document.body.appendChild(t);var e=t.getBoundingClientRect(),n=e.width,r=e.height;return document.body.removeChild(t),r/n}()*t);if(e>h)return[Math.floor(n*h/e),h];if(t>f){var r=Math.floor(e*f/n);return[f,r]}return[n,e]};window.onload=function(){c.style.display="none",i.style.display="none"},d.addEventListener("click",function(){(0,r.openWebcam)().then(function(t){(0,r.startStream)(t,m,c);(m=!m)&&c.addEventListener("play",function(){p()},!1)})});var p=function t(){var e=i.getContext("2d"),n=o(y(s,g),2),r=n[0],a=n[1];i.width=r,i.height=a,e.drawImage(c,0,0,i.width,i.height),v(),b(),setTimeout(function(){t()},0)},v=function(){for(var t=a.getImageData(0,0,i.width,i.height),e=t.data,n=0;n<e.length;n+=4){var r=function(t,e,n){return(Math.max(t,e,n)+Math.min(t,e,n))/2}(e[n],e[n+1],e[n+2]);e[n]=e[n+1]=e[n+2]=r}a.putImageData(t,0,0)},b=function(){for(var t,e=a.getImageData(0,0,i.width,i.height).data,n="",r=0;r<e.length;r+=4)r/4%i.width==0&&(n+="\n",0),n+=(t=e[r],function(t,e){for(;e-1>0;)t+=t,e--;return t}(l[Math.floor((l.length-1)*t/255)],1));u.style.fontSize="5px",u.textContent=n}},function(t,e,n){"use strict";n.r(e),n.d(e,"openWebcam",function(){return r}),n.d(e,"startStream",function(){return o});const r=()=>navigator.mediaDevices.getUserMedia({video:!0}),o=(t,e,n)=>{let r;return e?r.forEach(t=>{t.stop()}):(n.srcObject=t,r=t.getVideoTracks()),r}}]);